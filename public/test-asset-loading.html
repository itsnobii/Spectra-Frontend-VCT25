<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asset Loading Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #1a1a1a; color: white; }
        .asset-test { margin: 10px 0; padding: 10px; background: #333; border-radius: 5px; }
        .asset-test img { max-width: 200px; max-height: 100px; border: 1px solid #666; }
        .success { border-left: 4px solid #4CAF50; }
        .error { border-left: 4px solid #f44336; }
        .loading { border-left: 4px solid #2196F3; }
    </style>
</head>
<body>
    <h1>Asset Loading Test for Mapban FS</h1>
    <div id="asset-tests">
        <p>Testing asset availability...</p>
    </div>

    <script>
        const assets = [
            '/assets/misc/icon.webp',
            '/assets/maps/wide/Bind.webp',      // map_1 in Rive
            '/assets/maps/wide/Icebox.webp',    // map_2 in Rive  
            '/assets/maps/wide/Ascent.webp',    // map_3 in Rive
            '/assets/maps/wide/Haven.webp',     // map_4 in Rive
            '/assets/maps/wide/Split.webp',     // map_5 in Rive
            '/assets/maps/wide/Sunset.webp',    // map_6 in Rive
            '/assets/maps/wide/Lotus.webp'      // map_7 in Rive
        ];

        async function testAsset(url) {
            return new Promise((resolve) => {
                const img = new Image();
                const startTime = performance.now();
                
                img.onload = () => {
                    const loadTime = performance.now() - startTime;
                    resolve({ url, success: true, loadTime: loadTime.toFixed(2), dimensions: `${img.width}x${img.height}` });
                };
                
                img.onerror = () => {
                    const loadTime = performance.now() - startTime;
                    resolve({ url, success: false, loadTime: loadTime.toFixed(2), error: 'Failed to load' });
                };
                
                img.src = url;
            });
        }

        async function runTests() {
            const container = document.getElementById('asset-tests');
            container.innerHTML = '<h2>Asset Loading Results:</h2>';
            
            for (const asset of assets) {
                const testDiv = document.createElement('div');
                testDiv.className = 'asset-test loading';
                testDiv.innerHTML = `
                    <strong>Testing:</strong> ${asset}<br>
                    <em>Loading...</em>
                `;
                container.appendChild(testDiv);
                
                const result = await testAsset(asset);
                
                if (result.success) {
                    testDiv.className = 'asset-test success';
                    testDiv.innerHTML = `
                        <strong>✅ Success:</strong> ${result.url}<br>
                        <em>Load time: ${result.loadTime}ms | Dimensions: ${result.dimensions}</em><br>
                        <img src="${result.url}" alt="Asset preview">
                    `;
                } else {
                    testDiv.className = 'asset-test error';
                    testDiv.innerHTML = `
                        <strong>❌ Failed:</strong> ${result.url}<br>
                        <em>Load time: ${result.loadTime}ms | Error: ${result.error}</em>
                    `;
                }
            }
            
            // Test if we can fetch the Rive file
            const riveTestDiv = document.createElement('div');
            riveTestDiv.className = 'asset-test loading';
            riveTestDiv.innerHTML = `
                <strong>Testing:</strong> /assets/mapban/mapban-fs/mapban-fs.riv<br>
                <em>Loading...</em>
            `;
            container.appendChild(riveTestDiv);
            
            try {
                const response = await fetch('/assets/mapban/mapban-fs/mapban-fs.riv');
                if (response.ok) {
                    const size = response.headers.get('content-length');
                    riveTestDiv.className = 'asset-test success';
                    riveTestDiv.innerHTML = `
                        <strong>✅ Rive File Found:</strong> /assets/mapban/mapban-fs/mapban-fs.riv<br>
                        <em>Status: ${response.status} | Size: ${size ? (parseInt(size) / 1024).toFixed(2) + ' KB' : 'Unknown'}</em>
                    `;
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            } catch (error) {
                riveTestDiv.className = 'asset-test error';
                riveTestDiv.innerHTML = `
                    <strong>❌ Rive File Error:</strong> /assets/mapban/mapban-fs/mapban-fs.riv<br>
                    <em>Error: ${error.message}</em>
                `;
            }
        }

        runTests();
    </script>
</body>
</html>
